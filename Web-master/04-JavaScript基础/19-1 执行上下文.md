##上下文 vs 作用域

每个函数调用都有与之相关的作用域和上下文。作用域是和每次函数调用时**变量的访问**有关。上下文总是关键字 this 的值，是调用当前可执行代码的对象的引用。
**作用域是函数定义的时候就确定好的了(变量与函数作用范围确定好了)，函数当中的变量是和函数所处的作用域有关，函数运行的作用域也是与该函数定义时的作用域有关。**
**而上下文，主要是关键字this的值，这个是由函数运行时决定的，简单来说就是谁调用此函数，this就指向谁。而且可以确定变量与函数的具体值**

作用域只是一个“地盘”，其中没有变量。变量是通过作用域对应的执行上下文环境中的变量对象来实现的。所以作用域是静态观念的，而执行上下文环境是动态上的，两者并不一样。**有闭包存在时，一个作用域存在两个上下文环境也是有的**。也就是说，作用域只是用于划分你在这个作用域里面定义的变量的有效范围，出了这个作用域就无效

**同一个作用域下，对同一个函数的不同的调用会产生不同的执行上下文环境**，继而产生不同的变量的值，所以，作用域中变量的值是在执行过程中确定的，而作用域是在函数创建时就确定的。

如果要查找一个作用域下某个变量的值，就需要找到这个作用域对应的执行上下文环境，再在其中找到变量的值。

我的理解：

1. 作用域是确定变量与函数的作用范围，函数定义时确定
2. 上下文在函数执行时产生一个运行环境，可以确定this的值，进而确定变量具体的值，执行上下文是在执行的时候定义的。而且也有一个执行上下文栈



版权声明：本文为CSDN博主「chiuwingyan」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
原文链接：https://blog.csdn.net/chiuwingyan/article/details/80347473

##执行上下文
函数每调用一次，都会产生一个新的执行上下文环境。因为不同的调用可能就有不同的参数。**因此执行上下文是在执行的时候定义的。**

### 概念

　　当代码运行时，会产生一个对应的执行环境，在这个环境中，所有变量会被事先提出来（变量提升），有的直接赋值，有的为默认值 undefined，代码从上往下开始执行，就叫做执行上下文。

 　　在 JavaScript 的世界里，运行环境有三种，分别是：

　　　　1.全局环境：代码首先进入的环境

　　　　2.函数环境：函数被调用时执行的环境

　　　　3.eval函数：https://www.cnblogs.com/chaoguo1234/p/5384745.html（不常用）

### 执行上下文特点
　　1.单线程，在主进程上运行

　　2.同步执行，从上往下按顺序执行

　　3.全局上下文只有一个，浏览器关闭时会被弹出栈

　　4.函数的执行上下文没有数目限制

　　5.函数每被调用一次，都会产生一个新的执行上下文环境

## 执行上下文栈
执行全局代码时，会产生一个执行上下文环境，每次调用函数都又会执行上下文环境。当函数调用完成时，这个上下文环境以及其中的数据都会被消除（当然了闭包并不会乖乖就范），处于活动状态的执行上下文环境只有一个。

```javascript
 //这是一个压栈出栈的过程--执行上下文栈
 let a = 10, fn, // 1、进入全局上下文环境
    bar = function(x) {
      let b = 5
      fn(x + b) // 3、进入fn函数上下文环境
    }
 fn = function(y) {
  let c = 5
 console.log(y + c)
 }
 
 bar(10) // 2、进入bar函数上下文环境
```

![img](19-1%20%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87.assets/20180604155501483)