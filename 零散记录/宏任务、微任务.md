1.宏任务和微任务
宏任务和微任务是等待任务队列中的异步任务的处理机制；(JS执行有同步任务队列和等待任务队列)

浏览器的任务队列：

主任务队列存储的都是同步任务；

等待任务队列存储的都是异步任务；

首先浏览器会把主任务队列中的同步任务挨个全部执行完，然后再去等待任务队列中看哪个任务可以执行了，然后把该执行的任务放到主任务队列中去执行，等这个任务执行完，再去等待任务中看谁可以执行了，再把这个任务放到主任务队列中执行... 如此循环。这种循环叫做事件循环（Event Loop）

异步任务都是谁先到达条件谁先执行，但是谁先到达执行条件也有优先级的问题，这个优先级要看这个任务是宏任务还是微任务；微任务的优先级比宏任务的要高；

所以可以看做是这样的：浏览器线程先执行同步任务，途中遇到异步任务就将其加入到等待任务队列中去，然后继续向下执行，等同步任务全部执行完毕后，再去等待任务队列中去将所有可执行的微任务逐个执行，执行完后在拿取第一个先到达执行条件的宏任务来执行，执行完后再去等待任务队列中清理执行完所有已到达执行条件的微任务，然后再拿取下一个宏任务来执行，如果宏任务执行产生微任务或者微任务执行产生宏任务就一样加入到等待任务队列中，然后还是按照主线程每次到等待队列中先执行完所以的微任务再逐个执行宏任务的顺序来走

 

哪些是微任务：

1. Promise的then的回调函数

2. async 函数await下面的代码；

3. process.nextTick

 

哪些是宏任务：

1. 定时器（setInterval和setTimeout）

------------------------------------------------
版权声明：本文为CSDN博主「mister.奎」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
原文链接：https://blog.csdn.net/qq_40959677/article/details/95961443



https://www.pianshen.com/article/9568146017/

